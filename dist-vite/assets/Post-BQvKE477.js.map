{"version":3,"file":"Post-BQvKE477.js","sources":["../../src/utils/loadSinglePost.js","../../src/pages/Post.jsx"],"sourcesContent":["// src/utils/loadSinglePost.js\n// Carregador oficial dos posts da HOME (via .md)\n\nconst globHome = import.meta.glob(\n  \"../content/home/*.md\",\n  {\n    eager: true,\n    query: \"?raw\",\n    import: \"default\",\n  }\n);\n\n// Parser front-matter\nfunction parseFrontMatter(raw) {\n  if (!raw || typeof raw !== \"string\") return { data: {}, content: \"\" };\n\n  const txt = raw.trimStart();\n  if (!txt.startsWith(\"---\")) return { data: {}, content: raw };\n\n  const end = txt.indexOf(\"\\n---\", 3);\n  if (end === -1) return { data: {}, content: raw };\n\n  const fm = txt.slice(3, end).trim();\n  const body = txt.slice(end + 4).trim();\n\n  const data = {};\n  fm.split(\"\\n\").forEach((line) => {\n    const i = line.indexOf(\":\");\n    if (i === -1) return;\n\n    const key = line.slice(0, i).trim();\n    let val = line.slice(i + 1).trim();\n\n    val = val.replace(/^\"|\"$/g, \"\");\n\n    data[key] = val;\n  });\n\n  return { data, content: body };\n}\n\n// Conversor markdown → HTML\nfunction markdownToHtml(md) {\n  if (!md) return \"\";\n\n  let html = md;\n\n  html = html.replace(/^### (.*)$/gm, \"<h3>$1</h3>\");\n  html = html.replace(/^## (.*)$/gm, \"<h2>$1</h2>\");\n  html = html.replace(/^# (.*)$/gm, \"<h1>$1</h1>\");\n\n  html = html.replace(/\\*\\*(.+?)\\*\\*/g, \"<strong>$1</strong>\");\n  html = html.replace(/\\*(.+?)\\*/g, \"<em>$1</em>\");\n\n  html = html.replace(/(?:\\r?\\n){2,}/g, \"</p><p>\");\n  html = \"<p>\" + html + \"</p>\";\n\n  return html;\n}\n\n// Loader oficial para /artigo/:slug\nexport async function loadSinglePost(slug) {\n  try {\n    const encontrados = [];\n\n    for (const [path, raw] of Object.entries(globHome)) {\n      const { data, content } = parseFrontMatter(raw);\n\n      if (data.slug) encontrados.push(data.slug);\n\n      if (data.slug === slug) {\n        return {\n          ...data,\n          content,\n          fullContent: markdownToHtml(content),\n          path,\n        };\n      }\n    }\n\n    console.warn(\"Slug não encontrado:\", slug, \"— Slugs existentes:\", encontrados);\n    return null;\n\n  } catch (err) {\n    console.error(\"❌ ERRO em loadSinglePost():\", err);\n    return null;\n  }\n}\n","// src/pages/Post.jsx\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport \"../styles/post-page.css\";\nimport { loadSinglePost } from \"../utils/loadSinglePost.js\";\nimport { getDoc, doc } from \"firebase/firestore\";\nimport { db } from \"../firebase/config\";\n\nexport default function Post() {\n  const { slug } = useParams();\n  const [post, setPost] = useState(null);\n\n  useEffect(() => {\n    window.scrollTo({ top: 0, left: 0, behavior: \"instant\" });\n    setTimeout(() => {\n      window.scrollTo({ top: 0, left: 0, behavior: \"instant\" });\n    }, 80);\n  }, [slug]);\n\n  useEffect(() => {\n    let ativo = true;\n\n    async function carregar() {\n      const local = await loadSinglePost(slug);\n      if (local) {\n        if (ativo) setPost(local);\n        return;\n      }\n\n      try {\n        const ref = doc(db, \"publicacoes\", slug);\n        const snap = await getDoc(ref);\n\n        if (snap.exists() && ativo) {\n          const data = snap.data();\n          setPost({\n            ...data,\n            titulo: data.titulo || \"(sem título)\",\n            fullContent: data.texto || \"\",\n            imageUrl: data.imageUrl || null,\n          });\n          return;\n        }\n      } catch (err) {\n        console.error(\"Erro ao carregar do Firebase:\", err);\n      }\n\n      if (ativo) setPost(null);\n    }\n\n    carregar();\n    return () => (ativo = false);\n  }, [slug]);\n\n  if (!post) {\n    return (\n      <div className=\"min-h-[60vh] flex items-center justify-center text-gray-400 text-xl italic\">\n        Postagem não encontrada.\n      </div>\n    );\n  }\n\n  const imagemHero = post.imageUrl || post.imagem || null;\n  const conteudoFinal = post.fullContent || post.texto || \"\";\n\n  return (\n    <main\n      className=\"post-page-main\"\n      style={{\n        minHeight: \"100vh\",\n        backgroundColor: \"#010b0a\",\n        color: \"#EDEDED\",\n      }}\n    >\n      <section\n        style={{\n          position: \"relative\",\n          width: \"100%\",\n          height: \"60vh\",\n          maxHeight: \"520px\",\n          minHeight: \"420px\",\n          overflow: \"hidden\",\n        }}\n      >\n        {imagemHero && (\n          <>\n            <img\n              src={imagemHero}\n              alt={post.titulo}\n              style={{\n                position: \"absolute\",\n                inset: 0,\n                width: \"100%\",\n                height: \"100%\",\n                objectFit: \"cover\",\n              }}\n            />\n            <div\n              style={{\n                position: \"absolute\",\n                inset: 0,\n                background:\n                  \"linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.2) 40%, rgba(0,0,0,0.55) 100%)\",\n              }}\n            />\n          </>\n        )}\n      </section>\n\n      <section\n        style={{\n          width: \"100%\",\n          maxWidth: \"880px\",\n          margin: \"0 auto\",\n          padding: \"3rem 2rem 1.5rem\",\n          textAlign: \"center\",\n        }}\n      >\n        <h1\n          style={{\n            fontFamily: \"'Playfair Display', serif\",\n            fontSize: \"clamp(1.75rem, 5vw, 2.75rem)\",\n            fontWeight: 600,\n            color: \"#F5E3A1\",\n          }}\n        >\n          {post.titulo}\n        </h1>\n\n        <p\n          style={{\n            color: \"#A8A8A8\",\n            marginTop: \"0.5rem\",\n            marginBottom: \"1.25rem\",\n          }}\n        >\n          {(post.data || \"\")} • {(post.readTime || \"\")}\n        </p>\n\n        {post.tag && (\n          <span\n            style={{\n              display: \"inline-block\",\n              padding: \"0.35rem 1rem\",\n              border: \"1px solid rgba(212, 175, 55, 0.4)\",\n              borderRadius: \"9999px\",\n              fontSize: \"0.65rem\",\n              color: \"#D4AF37\",\n            }}\n          >\n            {post.tag}\n          </span>\n        )}\n      </section>\n\n      <article\n        style={{\n          width: \"100%\",\n          maxWidth: \"880px\",\n          margin: \"0 auto\",\n          padding: \"2.5rem 2rem 4.5rem\",\n        }}\n      >\n        <div\n          style={{\n            backgroundColor: \"rgba(0, 0, 0, 0.32)\",\n            border: \"1px solid rgba(212, 175, 55, 0.18)\",\n            borderRadius: \"0.875rem\",\n            padding: \"clamp(2rem, 5vw, 3rem)\",\n          }}\n        >\n          <div\n            style={{\n              color: \"#E2E2E2\",\n              fontSize: \"1.08rem\",\n              lineHeight: 1.8,\n              textAlign: \"justify\",\n            }}\n            dangerouslySetInnerHTML={{\n              __html: conteudoFinal,\n            }}\n          />\n        </div>\n      </article>\n    </main>\n  );\n}\n"],"names":["globHome","__vite_glob_0_0","__vite_glob_0_1","__vite_glob_0_2","parseFrontMatter","raw","txt","end","fm","body","data","line","i","key","val","markdownToHtml","md","html","loadSinglePost","slug","encontrados","path","content","err","Post","useParams","post","setPost","useState","useEffect","ativo","carregar","local","ref","doc","db","snap","getDoc","jsx","imagemHero","conteudoFinal","jsxs","Fragment"],"mappings":"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"}