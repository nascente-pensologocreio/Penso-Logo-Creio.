{"version":3,"file":"Biblioteca-Dh7-m5la.js","sources":["../../src/components/PostGrid.jsx","../../src/pages/Biblioteca.jsx"],"sourcesContent":["// src/components/PostGrid.jsx\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\n/**\n * PostGrid\n * - Recebe uma lista de postagens e exibe em grid responsivo\n * - Cada card tem atmosfera premium, hover e anima√ß√µes escalonadas\n *\n * Props:\n * - posts: Array<{ slug, titulo, subtitulo?, tipo?, data? }>\n */\nexport default function PostGrid({ posts = [] }) {\n  if (!posts || posts.length === 0) {\n    return (\n      <p className=\"text-center text-gray-400 italic\">\n        Nenhuma postagem dispon√≠vel.\n      </p>\n    );\n  }\n\n  return (\n    <div className=\"grid gap-8 md:grid-cols-2 lg:grid-cols-3\">\n      {posts.map((post, i) => (\n        <Link\n          key={post.slug || i}\n          to={`/post/${post.slug}`}\n          className={`group relative rounded-xl overflow-hidden border border-[#D4AF37]/30 bg-gradient-to-b from-black/70 via-[#0a0a0a]/80 to-black/90 shadow-lg hover-lift transition-smooth animate-fade-in-up ${delayClass(i)}`}\n        >\n          {/* Atmosfera */}\n          <div className=\"absolute inset-0 opacity-20 group-hover:opacity-40 transition-smooth gradient-gold\" />\n\n          {/* Conte√∫do do card */}\n          <div className=\"relative z-10 p-6 flex flex-col h-full\">\n            <h3 className=\"text-xl font-['Playfair_Display'] text-[#D4AF37] mb-2 group-hover:text-glow transition-smooth\">\n              {post.titulo}\n            </h3>\n\n            {post.subtitulo && (\n              <p className=\"text-sm italic text-gray-300 mb-4\">\n                {post.subtitulo}\n              </p>\n            )}\n\n            {post.tipo && (\n              <span className=\"text-xs uppercase tracking-wide text-[#cfcfcf] mb-2\">\n                {iconeTipo(post.tipo)} {post.tipo}\n              </span>\n            )}\n\n            {post.data && (\n              <span className=\"text-xs text-gray-400 mt-auto\">\n                {formatarData(post.data)}\n              </span>\n            )}\n          </div>\n        </Link>\n      ))}\n    </div>\n  );\n}\n\n/* Helpers */\n\nfunction iconeTipo(tipo) {\n  const map = {\n    devocional: \"üìñ\",\n    oracao: \"üôè\",\n    pregacao: \"üéô\",\n    homilia_informal: \"üïØ\",\n    homilia_tecnica: \"üéô\",\n    estudo: \"üìö\",\n    ponto_controverso: \"‚öñÔ∏è\",\n    terminologia_chave: \"üîë\",\n  };\n  return map[tipo] || \"‚úçÔ∏è\";\n}\n\nfunction formatarData(dataStr) {\n  try {\n    const d = new Date(dataStr);\n    return d.toLocaleDateString(\"pt-BR\", {\n      day: \"2-digit\",\n      month: \"long\",\n      year: \"numeric\",\n    });\n  } catch {\n    return dataStr;\n  }\n}\n\n/* Fun√ß√£o para aplicar delays escalonados */\nfunction delayClass(index) {\n  const delays = [\"delay-0\", \"delay-100\", \"delay-200\", \"delay-300\", \"delay-400\", \"delay-500\"];\n  return delays[index % delays.length];\n}\n","// src/pages/Biblioteca.jsx\nimport React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport { collection, getDocs } from \"firebase/firestore\";\nimport { db } from \"../firebase/config\";\n\nimport PostGrid from \"../components/PostGrid.jsx\";\nimport PostWrapper from \"../components/PostWrapper.jsx\";\n\nexport default function Biblioteca() {\n  const [posts, setPosts] = useState([]);\n  const [filtro, setFiltro] = useState(\"todos\");\n  const [busca, setBusca] = useState(\"\");\n  const [visiveis, setVisiveis] = useState(9); // quantidade inicial\n  const loaderRef = useRef(null);\n\n  useEffect(() => {\n    const carregar = async () => {\n      try {\n        const snapshot = await getDocs(collection(db, \"publicacoes\"));\n        const lista = snapshot.docs.map((doc) => ({\n          slug: doc.id,\n          ...doc.data(),\n        }));\n        setPosts(lista);\n      } catch (err) {\n        console.error(\"Erro ao carregar posts:\", err);\n      }\n    };\n    carregar();\n  }, []);\n\n  // Aplica filtro por tipo\n  let postsFiltrados =\n    filtro === \"todos\" ? posts : posts.filter((p) => p.tipo === filtro);\n\n  // Aplica busca por t√≠tulo/subt√≠tulo\n  if (busca.trim() !== \"\") {\n    const termo = busca.toLowerCase();\n    postsFiltrados = postsFiltrados.filter(\n      (p) =>\n        (p.titulo && p.titulo.toLowerCase().includes(termo)) ||\n        (p.subtitulo && p.subtitulo.toLowerCase().includes(termo))\n    );\n  }\n\n  // Posts vis√≠veis (scroll infinito)\n  const postsVisiveis = postsFiltrados.slice(0, visiveis);\n\n  // Observer para scroll infinito\n  const carregarMais = useCallback(\n    (entries) => {\n      const alvo = entries[0];\n      if (alvo.isIntersecting) {\n        setVisiveis((prev) => prev + 6); // carrega mais 6 posts\n      }\n    },\n    [setVisiveis]\n  );\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(carregarMais, {\n      root: null,\n      rootMargin: \"0px\",\n      threshold: 1.0,\n    });\n    if (loaderRef.current) {\n      observer.observe(loaderRef.current);\n    }\n    return () => {\n      if (loaderRef.current) {\n        observer.unobserve(loaderRef.current);\n      }\n    };\n  }, [carregarMais]);\n\n  return (\n    <PostWrapper\n      tipo=\"longo\"\n      titulo=\"Biblioteca Editorial\"\n      subtitulo=\"Explore todas as postagens do Penso Logo Creio\"\n    >\n      {/* Barra de filtros */}\n      <div className=\"flex flex-wrap gap-4 justify-center mb-6\">\n        {[\"todos\", \"devocional\", \"oracao\", \"pregacao\", \"estudo\"].map((tipo) => (\n          <button\n            key={tipo}\n            onClick={() => {\n              setFiltro(tipo);\n              setVisiveis(9); // resetar scroll infinito ao trocar filtro\n            }}\n            className={`px-4 py-2 rounded-md border border-[#D4AF37]/40 transition-smooth hover-lift ${\n              filtro === tipo\n                ? \"bg-[#D4AF37] text-black font-semibold\"\n                : \"bg-black/40 text-[#EDEDED]\"\n            }`}\n          >\n            {iconeTipo(tipo)} {tipo === \"todos\" ? \"Todos\" : tipo}\n          </button>\n        ))}\n      </div>\n\n      {/* Campo de busca */}\n      <div className=\"flex justify-center mb-10\">\n        <input\n          type=\"text\"\n          placeholder=\"üîç Buscar por t√≠tulo ou subt√≠tulo...\"\n          value={busca}\n          onChange={(e) => {\n            setBusca(e.target.value);\n            setVisiveis(9); // resetar scroll infinito ao buscar\n          }}\n          className=\"w-full max-w-md px-4 py-2 rounded-md border border-[#D4AF37]/40 bg-black/40 text-[#EDEDED] placeholder-gray-400 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/50 transition-smooth\"\n        />\n      </div>\n\n      {/* Grid de postagens */}\n      <PostGrid posts={postsVisiveis} />\n\n      {/* Loader para scroll infinito */}\n      {visiveis < postsFiltrados.length && (\n        <div\n          ref={loaderRef}\n          className=\"flex justify-center py-6 text-[#D4AF37] animate-pulse-glow\"\n        >\n          Carregando mais postagens...\n        </div>\n      )}\n    </PostWrapper>\n  );\n}\n\n/* Helpers */\nfunction iconeTipo(tipo) {\n  const map = {\n    todos: \"‚ú®\",\n    devocional: \"üìñ\",\n    oracao: \"üôè\",\n    pregacao: \"üéô\",\n    estudo: \"üìö\",\n  };\n  return map[tipo] || \"‚úçÔ∏è\";\n}\n"],"names":["PostGrid","posts","jsx","post","jsxs","Link","delayClass","iconeTipo","formatarData","tipo","dataStr","index","delays","Biblioteca","setPosts","useState","filtro","setFiltro","busca","setBusca","visiveis","setVisiveis","loaderRef","useRef","useEffect","lista","getDocs","collection","db","doc","err","postsFiltrados","p","termo","postsVisiveis","carregarMais","useCallback","entries","prev","observer","PostWrapper","e"],"mappings":"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"}